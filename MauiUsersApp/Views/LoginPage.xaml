<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:MauiUsersApp.ViewModels"
             xmlns:behaviors="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="MauiUsersApp.Views.LoginPage">

    <ContentPage.BindingContext>
        <vm:LoginPageViewModel />
    </ContentPage.BindingContext>

    <VerticalStackLayout 
            Spacing="20"
            VerticalOptions="Center" 
            HorizontalOptions="Center">

        <Label
            Text="Login"
            HorizontalOptions="Center"
            VerticalOptions="Center"
            FontSize="38"
            FontAttributes="Bold"
            Margin="0,-200,0,80" />

        <Label 
            Text="Email"
            FontAttributes="Bold"
            HorizontalOptions="Start"
            FontSize="20" />

        <Frame 
            Padding="0"
            CornerRadius="5"
            BorderColor="Gray"
            WidthRequest="300"
            HeightRequest="50">

            <Entry 
                Placeholder="Enter your email"
                Text="{Binding Email}"
                IsSpellCheckEnabled="False">

                <Entry.Behaviors>
                    <behaviors:EventToCommandBehavior
                        EventName="Unfocused"
                        Command="{Binding EmailUnfocusedCommand}" />
                </Entry.Behaviors>

            </Entry>
        </Frame>

        <Label
            Text="{Binding EmailErrorMessage}"
            TextColor="Red"
            FontAttributes="Bold"
            FontSize="12"
            Margin="0,-10,0,0"
            IsVisible="{Binding IsEmailErrorMessageVisible}"/>

        <Label
            Text="Password"
            FontAttributes="Bold"
            HorizontalOptions="Start"
            FontSize="20" />

        <Frame 
            Padding="0"
            CornerRadius="5"
            BorderColor="Gray"
            WidthRequest="300"
            HeightRequest="50">

            <Entry
                Placeholder="Password"
                Text="{Binding Password}"
                IsPassword="True">

                <Entry.Behaviors>
                    <behaviors:EventToCommandBehavior
                        EventName="Unfocused"
                        Command="{Binding PasswordUnfocusedCommand}" />
                </Entry.Behaviors>
                
            </Entry>
        </Frame>

        <Label
            Text="{Binding PasswordErrorMessage}"
            TextColor="Red"
            FontAttributes="Bold"
            FontSize="12"
            Margin="0,-10,0,0"
            IsVisible="{Binding IsPasswordErrorMessageVisible}"/>

        <Button
            Text="Login"
            Command="{Binding LoginCommand}"
            IsEnabled="{Binding IsInputValid}" />

    </VerticalStackLayout>
</ContentPage>